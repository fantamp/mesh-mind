# Стратегия Уолта Диснея (Walt Disney Strategy)

## Overview
Мультиагентная система для всесторонней генерации, проработки и валидации идей, основанная на методике Уолта Диснея. Инструмент последовательно применяет три ролевые модели (Мечтатель, Реалист, Критик) для превращения абстрактных замыслов в конкретные, устойчивые к рискам планы действий.

## Problem Statement
*   **Туннельное мышление**: Идеи часто ограничены текущим контекстом и привычными паттернами, упуская нестандартные возможности и "low-hanging fruits".
*   **Разрыв между идеей и реализацией**: Креативные концепции часто остаются абстрактными, без проработанных шагов внедрения (экшн-плана).
*   **Игнорирование рисков**: Отсутствие структурированной критики на ранних этапах приводит к обнаружению проблем только в процессе реализации.

## Solution Statement
Реализация классической креативной методики через оркестрацию трех специализированных агентов и **группы участников чата** под управлением мета-наблюдателя. Система работает в гибридном режиме **Co-creation**: агенты задают тон и предлагают варианты, а участники дополняют их. Процесс состоит из фазы подготовки (сбор контекста) и основного цикла генерации/валидации.

### Фаза 0: Подготовка (Сбор запроса)
Перед запуском творческого цикла Фасилитатор должен собрать контекст и сформировать "Вызов".

**Алгоритм сбора:**
1.  **Выявление проблемы**: "Что сейчас не так и что вы хотите получить в итоге?"
2.  **Определение ограничений**: "Какой бюджет, сроки и что точно делать нельзя?"
3.  **Взгляд со стороны (Outsider Perspective)**: *(Опционально)* Сбор внешних фактов и данных (клиенты, стейкхолдеры, метрики) без суждений, чтобы "заземлить" процесс на реальность.
4.  **Формулировка Вызова**: Переформулирование проблемы из негатива в вдохновляющий вопрос (например, вместо "починить сайт" -> "Как создать самый захватывающий сайт в нише?").
5.  **Подтверждение**: Фиксация "Вызова" и ограничений с пользователем.

**Критерии приемки запроса (Definition of Ready):**
Запрос считается готовым к передаче в работу, только если выполнены все 4 условия:
1.  **Все понятно**: Отсутствует двусмысленность в целях.
2.  **Задача вдохновляет**: Сформулированный «Вызов» мотивирует (позитивная формулировка).
3.  **Рамки определены**: Зафиксированы бюджет, сроки и жесткие ограничения.
4.  **Клиент согласен**: Пользователь явно подтвердил финальную формулировку задачи.

### Фаза 1: Основной цикл (Ролевые модели)
В каждой фазе активны и **Агент-роль**, и **Участники чата**. Фасилитатор фасилитирует процесс, поощряя людей придерживаться текущего режима мышления. Результаты работы агента и группы объединяются и передаются на следующий этап.

#### 1. Мечтатель (Dreamer)
*   **Роль**: Генератор визионерских идей.
*   **Режим**: Полная свобода от ограничений, фокус на "ЧТО", а не "КАК".
*   **Ключевые вопросы**:
    *   "Как бы выглядело идеальное решение, если бы бюджет был бесконечным?"
    *   "Что мы хотим получить в самом лучшем случае?"
    *   "Как можно полностью переизобрести этот процесс?"
*   **Правила**:
    *   **No "Yes, but..."**: Полный запрет на ограничения. Только "Yes, and...".
    *   **Record Everything**: Фиксируется абсолютно каждая идея, даже если она кажется дорогой или невозможной.
    *   Количество важнее качества.
    *   Использование визуализации (описание образов).
*   **Критерий завершения**: Исчерпан поток новых идей или достигнут лимит времени.
*   **Результат**: Список нефильтрованных концепций.

#### 2. Реалист (Realist/Doer)
*   **Роль**: Прагматичный планировщик.
*   **Режим**: Фокус на действии и реализации.
*   **Ключевые вопросы**:
    *   "Как превратить эту идею в действие?"
    *   "Какие ресурсы (люди, деньги, технологии) нужны?"
    *   "Кто будет отвечать за каждый этап?"
*   **Задача**:
    *   Превратить идеи Мечтателя в конкретный план действий.
    *   **Combine & Refine**: Объединять схожие идеи в более крупные инициативы.
    *   **Filter**: Отсеивать явно неустойчивые или слишком дорогие идеи (cost-benefit analysis).
    *   **Constructive Planning**: Не отвергать идеи ("Это невозможно"), а адаптировать их ("Как сделать это возможным?").
    *   Определить необходимые ресурсы, сроки и ответственных.
*   **Критерий завершения**: Для выбранных идей разработаны конкретные мини-планы (timeline, resources).
*   **Результат**: Черновик плана реализации (Draft Plan).

#### 3. Критик (Critic)
*   **Роль**: Конструктивный аудитор.
*   **Режим**: Поиск слабых мест и рисков.
*   **Ключевые вопросы**:
    *   "Что может пойти не так?"
    *   "Что мы упустили?"
    *   "Действительно ли это нужно [пользователю]?"
*   **Задача**:
    *   **Outsider Hat / Devil's Advocate**: Взглянуть на план глазами внешнего пользователя или скептика.
    *   **Pressure-test**: Задавать неудобные вопросы ("А что если никто не придет?", "А если бюджет урежут?").
    *   **Constructive Fixes**: Не просто критиковать, а предлагать решения (например, "Нужна мотивация" -> "Добавить систему поощрений").
*   **Логика принятия решений**:
    *   **Принять план**: Если план надежен и риски минимальны -> Выход из цикла.
    *   **Отправить на доработку**: Если найдены существенные недостатки.
        *   *К Реалисту*: Если нужно уточнить план, ресурсы или сроки.
        *   *К Мечтателю*: Если идея оказалась нежизнеспособной и нужно переосмыслить концепцию с нуля.
*   **Критерий завершения**: План проанализирован, риски выявлены и предложены меры по их минимизации.

### Фасилитатор (Наблюдатель)
Управляет процессом, передает контекст и следит за соблюдением ролей.
*   **Group Facilitation**: Приглашает участников присоединиться к текущей роли (например, "Давайте сейчас накидаем безумных идей вместе с Мечтателем!"). Следит, чтобы участники не критиковали на этапе мечтания и не фантазировали на этапе критики.
*   **Result Aggregation**: Собирает идеи/планы/критику не только от агента, но и из сообщений участников, написанных во время фазы.
*   **Virtual Spaces (Context Switching)**: Эмулирует "смену комнат" путем жесткого переключения системных промптов и очистки контекста от "шума" предыдущей фазы, передавая только структурированный результат.
*   **Meta-feedback**: Нейтральный наблюдатель, который следит, чтобы группа не застревала и не упускала важные перспективы (например, взгляд клиента).
*   **Time & Focus Management**: Фасилитатор следит за динамикой и "подгоняет" участников (Nudge), если:
    *   **Time Limit**: Группа слишком долго находится в одной фазе.
    *   **Repetition**: Участники начали повторяться.
    *   **Triviality**: Обсуждение ушло в мелкие детали, не соответствующие уровню фазы.
    *   **Drift**: Уход от темы (off-topic).
    *   **Saturation**: Нагенерировано достаточно качественного контента для перехода к следующему этапу (даже если время еще есть).
*   **External Info**: Может вбрасывать внешнюю информацию, если обсуждение уходит в отрыв от реальности.
*   **Iteration (Looping)**: Если Критик находит проблемы, Фасилитатор запускает новый виток:
    *   *Critic -> Realist*: Для корректировки плана.
    *   *Critic -> Dreamer*: Для поиска новых решений фундаментальных проблем.
    *   Цикл повторяется, пока план не станет надежным (Robust Plan).
*   **Global Pivot (Reset)**: Если в любой момент (обычно на этапе Критика или Реалиста) группа понимает, что изначальная постановка задачи (Phase 0) была ошибочной:
    *   Текущий прогресс (идеи, наброски плана, риски) резюмируется в "Context Summary".
    *   Процесс сбрасывается в Фазу 0.
    *   Группа переформулирует "Вызов" с учетом полученного опыта и Context Summary.

Цикл завершается только тогда, когда Критик не находит критических рисков, а Реалист подтверждает исправление замечаний.

### Результат (Output)
На выходе формируется **Blueprint** — четкий план реализации, готовый к передаче в работу (project management). Это документ, который заземлен на реальность (благодаря Реалисту и Критику), но при этом сохраняет инновационность (благодаря Мечтателю).


## Value Statement
*   **Качество решений**: Глубокая проработка идей с трех разных точек зрения повышает жизнеспособность финального продукта.
*   **Actionable Result**: На выходе пользователь получает не просто набор идей, а верифицированный план действий.
*   **Автоматизация фасилитации**: Агент берет на себя роль модератора брейншторм-сессии, экономя время команды.

## Architecture / Technical details

### Алгоритм (Псевдокод)
```python
```python
ALGORITHM WaltDisneyStrategy():
    global_resolved = False
    context_summary = "" # Накопленный опыт предыдущих попыток

    WHILE NOT global_resolved:
        # 1. Вход в технику: Сбор запроса (с учетом прошлого опыта)
        IF context_summary:
            problem = ASK_USER("Давайте переформулируем задачу с учетом наработок: " + context_summary)
        ELSE:
            problem = ASK_USER("Что не так?")
            
        constraints = ASK_USER("Бюджет, сроки, лимиты?")
        challenge = TRANSFORM_TO_CHALLENGE(problem)
        
        # Проверка критериев готовности
        WHILE NOT CONFIRM_WITH_USER(challenge, constraints):
            challenge, constraints = REFINE_INPUT()

        # 2. Цикл работы над задачей (Co-creation)
        inner_resolved = False
        current_stage = "Dreamer"
        
        WHILE NOT inner_resolved:
            # Check for Global Pivot Request at any stage
            IF USER_REQUESTS_RESET():
                context_summary = SUMMARIZE_PROGRESS(all_ideas, plan, risks)
                BREAK # Break inner loop, return to Phase 0
            
            # Check for Pacing / Time Management
            IF SHOULD_ADVANCE_STAGE(current_stage, time_spent, content_quality):
                NUDGE_USER("Пора двигаться дальше! Мы собрали достаточно идей/деталей.")
                # Logic to force transition or ask for final input
        
            IF current_stage == "Dreamer":
                SET_CONTEXT("Dreamer", strict_mode=False)
                # Агент и Группа генерируют идеи совместно
                agent_ideas = GENERATE_IDEAS(challenge)
                user_ideas = COLLECT_USER_INPUT("Предлагайте любые безумные идеи!")
                all_ideas = MERGE(agent_ideas, user_ideas)
                
                current_stage = "Realist"
                
            ELIF current_stage == "Realist":
                SET_CONTEXT("Realist", constraints=constraints)
                # Агент и Группа планируют совместно
                draft_plan = CREATE_PLAN(all_ideas)
                user_refinements = COLLECT_USER_INPUT("Как это реализовать? Дополните план.")
                plan = REFINE_PLAN(draft_plan, user_refinements)
                
                current_stage = "Critic"
                
            ELIF current_stage == "Critic":
                SET_CONTEXT("Critic")
                # Агент и Группа ищут риски совместно
                agent_risks = EVALUATE_RISKS(plan)
                user_risks = COLLECT_USER_INPUT("Что может пойти не так?")
                verdict, feedback = AGGREGATE_VERDICT(agent_risks, user_risks)
                
                IF verdict == "APPROVED":
                    inner_resolved = True
                    global_resolved = True # Success!
                ELSE:
                    # Маршрутизация возврата
                    IF feedback.requires_reimagining:
                        current_stage = "Dreamer" # Фундаментальные проблемы
                    ELSE:
                        current_stage = "Realist" # Проблемы реализации
            
    RETURN "Готовый к реализации проект (Blueprint)"
```


### Техническая реализация
*   **`DisneyFacilitator`**:
    *   Реализует state machine для переходов между этапами.
    *   Хранит `SessionContext`: `Challenge`, `Constraints`, `Ideas`, `CurrentPlan`, `CritiqueHistory`.
*   **Интерактивность**:
    *   На этапе "Сбора запроса" Фасилитатор должен уметь задавать уточняющие вопросы пользователю (через tool `ask_user` или прерывание цепочки).
*   **Субагенты**:
    *   Использование различных системных промптов и параметров генерации (temperature) для каждой роли.
*   **Источники данных (Inputs)**:
    *   Система должна поддерживать загрузку контекста из различных источников:
        *   **Canvas Elements**: Отдельные или сгруппированные элементы с виртуальной доски.
        *   **Chat History**: Подборки сообщений из истории общения для анализа и генерации идей.









