# Рабочий поток: Демо → Observation → Отладка → Оценка → Тестирование (Google ADK)

## 1. Демо
- Цель: быстро показать текущие возможности агента на типовом сценарии без метрик качества.
- Инструменты: `adk web` для запуска UI/трэйса; допустимо одиночный скрипт/ноутбук.
- Результат: интерактивная сессия, которую можно сохранить как реплей или основу для eval.
- Когда применять: после черновой реализации, чтобы проверить UX и маршрутизацию вручную.

## 2. Observation (наблюдения событий)
- Цель: фиксировать поток событий `Event` (сообщения, function_call/response, смена агентов) для анализа.
- Инструменты: стандартный эвент-стрим ADK; логирование через встроенный `logging`.
- Результат: журнал событий с `invocation_id` и `function_call_id`, пригодный для разбора шагов.
- Когда применять: включать всегда в DEV; в проде — выборочно, с урезанным уровнем.
- Документация: https://google.github.io/adk-docs/observability/logging/

## 3. Отладка
- Цель: понять, где ломается цепочка (роутинг, tool call, модельный ответ) на основе observation.
- Инструменты: `adk web` трейсы; при деплое — Cloud Trace (`--trace_to_cloud`).
- Результат: локализованная причина (не тот tool, ошибка вызова, задержка) и гипотеза фикса.
- Когда применять: после первых демо и при регрессии; до формализации кейса в eval.
- Документация: https://google.github.io/adk-docs/observability/cloud-trace/

## 4. Оценка (Evaluation)
- Цель: формализовать поведение через eval-наборы и получить метрики/проходы.
- Инструменты: `adk eval AGENT_PATH evalset.json`; хранить evalsets в репозитории.
- Результат: метрики (например, tool_trajectory_avg_score), детальные отчёты, стабильный pass/fail.
- Когда применять: перед релизом и при любом изменении логики агента; включать в CI.
- Документация: https://google.github.io/adk-docs/api-reference/cli/cli.html#eval

## 5. Тестирование
- Цель: поймать регрессии в supporting-коде и закрепить поведение агентов.
- Инструменты: pytest для utility/infra; eval как функциональные тесты агента; при необходимости `Runner.run_debug` для быстрых проверок.
- Результат: бинарный сигнал для кода + метрики для агентного поведения в одном пайплайне.
- Когда применять: постоянно в CI; запускать после добавления/обновления eval и кода.
- Документация: https://google.github.io/adk-docs/evaluation/ (раздел AgentEvaluator)
