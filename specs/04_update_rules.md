# Спека 04: Обновление Правил в .agent/rules/

## Цель
Обновить файлы правил в `.agent/rules/` после выполнения спек 01-03.

## Обновления в .agent/rules/01-project-overview.md

### 1. Раздел "Стек Технологий" (строки ~13-22)
**Убрать:**
- `Векторная БД: ChromaDB` (удалено в Спеке 01)
- `API: FastAPI` (удалено в Спеке 03)
- `UI: Streamlit` (удалено в Спеке 02)

**Финальный список:**
- **Язык**: Python 3.10+
- **AI Framework**: Google Agent Development Kit (ADK)
- **Реляционная БД**: SQLite
- **Bot Framework**: python-telegram-bot v20+

### 2. Раздел "Архитектура" (строки ~23-32)
**Убрать:**
- "CLI Tools" из списка компонентов

**Оставить только:**
1. **Telegram Bot** — главное приложение, напрямую импортирует модули из `ai_core`
2. **AI Core** — агенты, storage, общие утилиты

### 3. Раздел "Ключевые Агенты" (строки ~33-39)
**Убрать:**
- "QA Agent" (объединён с Chat Observer)

**Финальный список:**
1. **Orchestrator** — главный координатор запросов
2. **Chat Summarizer** — суммаризация истории чата
3. **Chat Observer** — поиск сообщений и ответы на вопросы

## Обновления в .agent/rules/02-architecture.md

### 4. Раздел "Общая Архитектура" (строки ~3-9)
**Заменить описание на:**
- **Telegram Bot** (`telegram_bot/`) — главное приложение, напрямую импортирует `ai_core`
- **AI Core** (`ai_core/`) — агенты, storage, общие утилиты

### 5. Раздел "Хранение Данных" (строки ~53-61)
**Убрать:**
- Все упоминания VectorDB (ChromaDB)
- Строку про `data/vector_store/`

**Оставить только:**
- **SQLite** (`data/db/`) — сырые сообщения, метаданные
- **File System** (`data/media/`) — медиа файлы

## Обновление тестов
- Проверить, что все тесты в `tests/` пройдены после обновления правил
- Убедиться, что нет ссылок на удалённые компоненты

## Обновление документации
- **Примечание:** Обновления в `docs/` описаны в спеках 01-03
