# Workflow: Проверка и Обновление Документации

// turbo

Проактивный workflow для проверки актуальности документации в `docs/` и её обновления при необходимости.

## Цель

Поддерживать документацию проекта:
- Синхронизированной с кодом
- Актуальной (соответствующей последним версиям библиотек)
- Без дубликатов и противоречий
- В рамках лимитов по длине (600 строк на файл)

## Когда Запускать

- После значительных изменений в коде
- При обновлении зависимостей (Google ADK, python-telegram-bot и т.д.)
- Периодически (раз в месяц)
- По запросу пользователя

## Шаги Выполнения

### 1. Анализ Изменений в Коде

**Изучи последние изменения:**
```bash
git log --since="1 month ago" --oneline
git diff HEAD~10 HEAD --stat
```

**Вопросы:**
- Добавлены новые агенты или функции?
- Изменилась архитектура?
- Обновились зависимости?

### 2. Поиск Актуальной Технической Документации

**Поиск в интернете:**
- Актуальная версия Google ADK и её документация
- Изменения в python-telegram-bot (если используется)
- Обновления ChromaDB, FastAPI, Streamlit
- Best practices для используемых технологий

**Сохрани ссылки** на актуальные источники.

### 3. Проверка Документации

Прочитай все файлы в `docs/`:

**Requirements:**
- requirements/product-vision.md
- requirements/multi-agent-system.md
- requirements/technical-requirements.md

**Architecture:**
- architecture/system-overview.md
- architecture/multi-agent-design.md
- architecture/project-structure.md

**Другие:**
- kaggle-submission.md

> Все пути относительно docs/

**Проверь на:**
- Соответствие реальному коду
- Устаревшие ссылки на документацию
- Соответствие лимитам (600 строк)
- Противоречия между документами
- Дубликаты информации

### 4. Сверка с Кодом

**Для каждого документа:**

Сравни описание с реальной реализацией:
- Агенты описаны правильно?
- Паттерны соответствуют коду?
- Структура каталогов актуальна?
- API endpoints описаны верно?

### 5. Формирование Предложений

**При обнаружении расхождений:**

Задай вопросы пользователю:
1. Что является source of truth - код или документация?
2. Нужно ли обновить документацию под код или наоборот?
3. Есть ли специфичные детали, которые нужно добавить?

**Формат предложений:**
```markdown
## Предлагаемые Изменения

### Критичные Несоответствия
- [ ] multi-agent-design.md: описан Agent-Extractor, но его нет в коде
- [ ] technical-requirements.md: ссылка на ADK evaluation устарела

### Улучшения
- [ ] Добавить mermaid диаграмму в system-overview.md
- [ ] Обновить версию ADK в technical-requirements.md

### Оптимизация Длины
- [ ] Сократить multi-agent-system.md (сейчас 680 строк, лимит 600)
```

### 6. Применение Изменений

**После одобрения пользователя:**
- Обнови файлы в `docs/`
- Проверь лимиты по длине (600 строк)
- Обнови перекрёстные ссылки
- Убедись в согласованности между документами

### 7. Верификация

**Финальная проверка:**
- Все файлы ≤ 600 строк?
- Нет противоречий между документами?
- Ссылки работают?
- Документация соответствует коду?
- Mermaid диаграммы отображаются корректно?

## Принципы Обновления

1. **Синхронизация с кодом** — документация отражает реальность
2. **Актуальность** — ссылки на последние версии документации
3. **Краткость** — соблюдение лимитов (600 строк)
4. **Нет дубликатов** — информация не повторяется между файлами
5. **Вопросы при противоречиях** — не угадывай, спрашивай пользователя

## Инструменты

**Проверка длины файла:**
```bash
wc -l docs/requirements/multi-agent-system.md
```

**Поиск дубликатов по ключевым словам:**
```bash
grep -r "Sub-Agents pattern" docs/
```

> Пути команд относительно корня проекта

## Автоматическое Выполнение

Пометка `// turbo` позволяет автоматически выполнять безопасные команды (чтение файлов, анализ кода, поиск информации). Изменения файлов требуют одобрения.

## Ссылки

> Пути относительно корня проекта

- docs/antigravity-rules-reglament.md
- [ADK Документация](https://google.github.io/adk-docs/)
