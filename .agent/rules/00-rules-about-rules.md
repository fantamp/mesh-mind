---
trigger: model_decision
description: Когда нужно обновить или проверить правила проекта
---

# Правила о Правилах (Antigravity Best Practices)

## Философия Antigravity

Antigravity — это "agent-first" платформа, где агенты работают как автономные разработчики. Правила направляют их поведение, обеспечивая качество и согласованность кода.

## Принципы Написания Правил

### 1. Краткость и Чёткость
- **Краткие правила**: ≤50 строк
- **Workflows**: ≤50 строк

### 2. Модульность
- Один файл = одна тема (обзор, архитектура, стиль, тесты, безопасность)
- Правила не должны дублировать друг друга
- Используй ссылки на детальную документацию вместо повторений

### 3. Язык
- Правила должны быть на русском языке

### 4. Структура
Правила описывают **как** работать, а не **что** делать:
- ✅ "Используй ADK для создания агентов"
- ✅ "Все tools фильтруют по chat_id"
- ❌ Подробные технические спецификации фич
- ❌ Длинные описания бизнес-логики
- ❌ Примеры кода (только в исключительных случаях)

### 5. Ссылки vs Копирование
Вместо копирования документации используй ссылки:
- ✅ "Детали в docs/architecture/system-overview.md"
- ❌ Дублирование всей архитектурной схемы

## Где Что Хранить

- **Workspace правила** (`.agent/rules/*.md`): специфика проекта, архитектура, соглашения
- **Документация** (`docs/`): детальные требования, спецификации, ADR

## Обновление Правил

**ВАЖНО**: Правила в `.agent/rules/` НЕ редактируются напрямую!

Если посчитаешь нужным обновить правила, то:
1. Создай обновлённые файлы в `.antigravity/tmp_rules/`
2. Проверь, что у тебя получилось;
3. Напиши `.antigravity/tmp_rules/apply_rules.sh` для применения изменений правил, но сам не запускай!
4. Сообщи пользователю что написал новые правила и предлаешь их обновить, сообщи про скрипт.
