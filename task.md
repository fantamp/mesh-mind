# Task List

- [ ] **Common Library**
    - [x] Configuration Management
    - [x] Logging Setup
    - [x] Data Models
- [ ] **Data Storage**
    - [x] SQLite Setup
    - [x] File System Storage
- [ ] **Vector Store**
    - [x] ChromaDB Setup
    - [x] Embeddings
- [x] **Finalize Kaggle MVP** <!-- id: 10 -->
    - [x] **Backend & Core** <!-- id: 11 -->
        - [x] Update `VectorDB` to support `chat_id` in `add_texts` and `search` <!-- id: 12 -->
        - [x] Update `QA Agent` to use `chat_id` for context isolation <!-- id: 13 -->
        - [x] Update `Summarizer Agent` to support document summarization by `chat_id` <!-- id: 14 -->
    - [x] **Telegram Bot** <!-- id: 15 -->
        - [x] Implement whitelist for `TELEGRAM_ALLOWED_CHAT_IDS` <!-- id: 16 -->
        - [x] Update `/start` to show authorization status <!-- id: 17 -->
        - [x] Pass `chat_id` to all API calls <!-- id: 18 -->
    - [x] **Web UI** <!-- id: 19 -->
        - [x] Add file deletion to `Knowledge Base` page <!-- id: 20 -->
        - [x] Add "Summarize Documents" mode to `Chat` page <!-- id: 21 -->
    - [x] **Verification** <!-- id: 22 -->
        - [x] Create `tests/test_context_isolation.py` <!-- id: 23 -->
        - [x] Verify Telegram Bot whitelist and context isolation <!-- id: 24 -->
        - [x] Verify Web UI new features <!-- id: 25 -->
- [x] **Web UI Refinement** <!-- id: 26 -->
    - [x] Update `VectorDB` to retrieve unique `chat_id`s <!-- id: 27 -->
    - [x] Update `Knowledge Base` to allow specifying `chat_id` on upload <!-- id: 28 -->
    - [x] Update `Chat` to select `chat_id` and handle `/summary` vs QA <!-- id: 29 -->
- [ ] **Transcription Service** <!-- id: 0 -->
    - [x] Implement `TranscriptionService` class <!-- id: 1 -->
    - [x] Add dependencies (`tenacity`) <!-- id: 2 -->
    - [x] Manual verification script <!-- id: 3 -->
- [ ] **Ingestion Service**
    - [x] File Parsers (Text, PDF, EML, Audio)
    - [x] Chunking Logic
    - [x] CLI Tool
    - [x] Tests
- [x] **Telegram Bot** <!-- id: 9 -->
    - [x] Implement `telegram_bot/main.py` <!-- id: 10 -->
    - [x] Implement `tests/test_telegram_bot.py` <!-- id: 11 -->
- [ ] **AI Agents**
    - [x] QA Agent Implementation <!-- id: 4 -->
        - [x] Implement `qa.py` with ADK <!-- id: 5 -->
        - [x] Implement `search_knowledge_base` tool <!-- id: 6 -->
        - [x] Tests for QA Agent <!-- id: 7 -->
        - [x] Manual QA Test Script <!-- id: 8 -->
- [ ] **Admin UI**
    - [x] Add `streamlit` dependency
    - [x] Implement `ai_core/ui/main.py` (Home)
    - [x] Implement `ai_core/ui/pages/1_Knowledge_Base.py`
    - [x] Implement `ai_core/ui/pages/2_Chat.py`
    - [x] Verify UI
- [x] **CLI Tools**
    - [x] Изучить документацию Typer
    - [x] Создать `cli/main.py` с командой `ingest`
    - [x] Добавить зависимости (`typer`, `tqdm`)
    - [x] Создать тесты `tests/test_cli.py`
    - [x] Manual verification (через walkthrough)
    - [x] Запустить `pytest .`
